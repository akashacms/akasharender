import Joi from "joi";
;
const joiIsPathsReturnType = Joi.object({
    vpath: Joi.string(),
    mime: Joi.string().optional().allow(null),
    mounted: Joi.string(),
    mountPoint: Joi.string(),
    pathInMounted: Joi.string(),
    mtimeMs: Joi.number(), // .integer(),
    info: Joi.any(),
    fspath: Joi.string(),
    renderPath: Joi.string()
});
export function validatePathsReturnType(obj) {
    return joiIsPathsReturnType.validate(obj);
}
;
export const joiAsset = Joi.object({
    vpath: Joi.string(),
    renderPath: Joi.string(),
    mime: Joi.string().optional().allow(null),
    mounted: Joi.string(),
    mountPoint: Joi.string(),
    pathInMounted: Joi.string(),
    fspath: Joi.string(),
    dirname: Joi.string(),
    mtimeMs: Joi.number(), // .integer(),
    info: Joi.any()
});
export function validateAsset(obj) {
    return joiAsset.validate(obj);
}
export const createAssetsTable = `
CREATE TABLE IF NOT EXISTS "ASSETS" (
  \`vpath\` TEXT PRIMARY KEY,
  \`renderPath\` TEXT  GENERATED ALWAYS
        AS (vpath) STORED,
  \`mime\` TEXT,
  \`mounted\` TEXT,
  \`mountPoint\` TEXT,
  \`pathInMounted\` TEXT,
  \`fspath\` TEXT,
  \`dirname\` TEXT,
  \`mtimeMs\` REAL,
  \`info\` TEXT
) WITHOUT ROWID;
CREATE INDEX "asset_vpath"
        ON "ASSETS" ("vpath");
CREATE INDEX "asset_mounted"
        ON "ASSETS" ("mounted");
CREATE INDEX "asset_mountPoint"
        ON "ASSETS" ("mountPoint");
CREATE INDEX "asset_pathInMounted"
        ON "ASSETS" ("pathInMounted");
CREATE INDEX "asset_fspath"
        ON "ASSETS" ("fspath");
CREATE INDEX "asset_dirname"
        ON "ASSETS" ("dirname");
CREATE INDEX "asset_mtimeMs"
        ON "ASSETS" ("mtimeMs");
`;
;
export const joiPartial = Joi.object({
    vpath: Joi.string(),
    renderPath: Joi.string(),
    mime: Joi.string().optional().allow(null),
    mounted: Joi.string(),
    mountPoint: Joi.string(),
    pathInMounted: Joi.string(),
    fspath: Joi.string(),
    dirname: Joi.string(),
    mtimeMs: Joi.number(), // .integer(),
    info: Joi.any(),
    // Added fields
    docBody: Joi.string().optional().allow(null),
    rendererName: Joi.string().optional().allow(null)
});
export function validatePartial(obj) {
    return joiPartial.validate(obj);
}
export const createPartialsTable = `
CREATE TABLE IF NOT EXISTS "PARTIALS" (
  \`vpath\` TEXT PRIMARY KEY,
  \`renderPath\` TEXT  GENERATED ALWAYS
        AS (vpath) STORED,
  \`mime\` TEXT,
  \`mounted\` TEXT,
  \`mountPoint\` TEXT,
  \`pathInMounted\` TEXT,
  \`fspath\` TEXT,
  \`dirname\` TEXT,
  \`mtimeMs\` REAL,
  \`docBody\` TEXT,
  \`rendererName\` TEXT,
  \`info\` TEXT
) WITHOUT ROWID;
CREATE INDEX "partial_vpath"
        ON "PARTIALS" ("vpath");
CREATE INDEX "partial_mounted"
        ON "PARTIALS" ("mounted");
CREATE INDEX "partial_mountPoint"
        ON "PARTIALS" ("mountPoint");
CREATE INDEX "partial_pathInMounted"
        ON "PARTIALS" ("pathInMounted");
CREATE INDEX "partial_fspath"
        ON "PARTIALS" ("fspath");
CREATE INDEX "partial_dirname"
        ON "PARTIALS" ("dirname");
CREATE INDEX "partial_mtimeMs"
        ON "PARTIALS" ("mtimeMs");
`;
;
export const joiLayout = Joi.object({
    vpath: Joi.string(),
    renderPath: Joi.string(),
    mime: Joi.string().optional().allow(null),
    mounted: Joi.string(),
    mountPoint: Joi.string(),
    pathInMounted: Joi.string(),
    fspath: Joi.string(),
    dirname: Joi.string(),
    mtimeMs: Joi.number(), // .integer(),
    info: Joi.any(),
    // Added fields
    rendersToHTML: Joi.alternatives()
        .try(Joi.boolean(), Joi.number().integer().min(0).max(1)),
    docBody: Joi.string().optional().allow(null),
    rendererName: Joi.string().min(0).optional().allow(null)
});
export function validateLayout(obj) {
    return joiLayout.validate(obj);
}
export const createLayoutsTable = `
CREATE TABLE IF NOT EXISTS "LAYOUTS" (
  \`vpath\` TEXT PRIMARY KEY,
  \`renderPath\` TEXT  GENERATED ALWAYS
        AS (vpath) STORED,
  \`mime\` TEXT,
  \`mounted\` TEXT,
  \`mountPoint\` TEXT,
  \`pathInMounted\` TEXT,
  \`fspath\` TEXT,
  \`dirname\` TEXT,
  \`mtimeMs\` REAL,
  \`rendersToHTML\` INTEGER,
  \`docBody\` TEXT,
  \`rendererName\` TEXT,
  \`info\` TEXT
) WITHOUT ROWID;
CREATE INDEX "layout_vpath"
        ON "LAYOUTS" ("vpath");
CREATE INDEX "layout_mounted"
        ON "LAYOUTS" ("mounted");
CREATE INDEX "layout_mountPoint"
        ON "LAYOUTS" ("mountPoint");
CREATE INDEX "layout_pathInMounted"
        ON "LAYOUTS" ("pathInMounted");
CREATE INDEX "layout_fspath"
        ON "LAYOUTS" ("fspath");
CREATE INDEX "layout_dirname"
        ON "LAYOUTS" ("dirname");
CREATE INDEX "layout_mtimeMs"
        ON "LAYOUTS" ("mtimeMs");
`;
;
export const joiDocument = Joi.object({
    vpath: Joi.string(),
    mime: Joi.string().optional().allow(null),
    mounted: Joi.string(),
    mountPoint: Joi.string(),
    pathInMounted: Joi.string(),
    fspath: Joi.string(),
    dirname: Joi.string(),
    mtimeMs: Joi.number(), // .integer(),
    info: Joi.any(),
    // Added fields
    renderPath: Joi.string(),
    rendersToHTML: Joi.alternatives()
        .try(Joi.boolean(), Joi.number().integer().min(0).max(1)),
    parentDir: Joi.string(),
    publicationTime: Joi.number().optional().allow(null),
    baseMetadata: Joi.any(),
    docMetadata: Joi.any(),
    docContent: Joi.string().min(0).optional().allow(null),
    docBody: Joi.string().min(0).optional().allow(null),
    metadata: Joi.any(),
    tags: Joi.any(),
    layout: Joi.alternatives()
        .try(Joi.string(), Joi.allow(null)),
    blogtag: Joi.alternatives()
        .try(Joi.string(), Joi.allow(null)),
    rendererName: Joi.string().min(0).optional().allow(null)
});
export function validateDocument(obj) {
    return joiDocument.validate(obj);
}
export const createDocumentsTable = `
CREATE TABLE IF NOT EXISTS "DOCUMENTS" (
  \`vpath\` TEXT PRIMARY KEY,
  \`mime\` TEXT,
  \`mounted\` TEXT,
  \`mountPoint\` TEXT,
  \`pathInMounted\` TEXT,
  \`fspath\` TEXT,
  \`dirname\` TEXT,
  \`mtimeMs\` REAL,
  \`renderPath\` TEXT,
  \`rendersToHTML\` INTEGER,
  \`parentDir\` TEXT,
  \`publicationTime\` INTEGER GENERATED ALWAYS
        AS (json_extract(info, '$.publicationTime')) STORED,
  \`baseMetadata\` TEXT GENERATED ALWAYS
        AS (json_extract(info, '$.baseMetadata')) STORED,
  \`docMetadata\` TEXT,
  \`docContent\` TEXT,
  \`docBody\` TEXT,
  \`metadata\` TEXT GENERATED ALWAYS
        AS (json_extract(info, '$.metadata')) STORED,
  \`tags\` TEXT GENERATED ALWAYS
        AS (json_extract(info, '$.metadata.tags')) STORED,
  \`layout\` TEXT GENERATED ALWAYS
        AS (json_extract(metadata, '$.layout')) STORED,
  \`blogtag\` TEXT GENERATED ALWAYS
        AS (json_extract(metadata, '$.blogtag')) STORED,
  \`rendererName\` TEXT,
  \`info\` TEXT
) WITHOUT ROWID;
CREATE INDEX "document_vpath"
        ON "DOCUMENTS" ("vpath");
CREATE INDEX "document_mounted"
        ON "DOCUMENTS" ("mounted");
CREATE INDEX "document_mountPoint"
        ON "DOCUMENTS" ("mountPoint");
CREATE INDEX "document_pathInMounted"
        ON "DOCUMENTS" ("pathInMounted");
CREATE INDEX "document_fspath"
        ON "DOCUMENTS" ("fspath");
CREATE INDEX "document_dirname"
        ON "DOCUMENTS" ("dirname");
CREATE INDEX "document_renderPath"
        ON "DOCUMENTS" ("renderPath");
CREATE INDEX "document_rendersToHTML"
        ON "DOCUMENTS" ("rendersToHTML");
CREATE INDEX "document_parentDir"
        ON "DOCUMENTS" ("parentDir");
CREATE INDEX "document_mtimeMs"
        ON "DOCUMENTS" ("mtimeMs");
CREATE INDEX "document_publicationTime"
        ON "DOCUMENTS" ("publicationTime");
CREATE INDEX "document_tags"
        ON "DOCUMENTS" ("tags");
CREATE INDEX "document_layout"
        ON "DOCUMENTS" ("layout");
CREATE INDEX "document_blogtag"
        ON "DOCUMENTS" ("blogtag");
`;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vbGliL2NhY2hlL3NjaGVtYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEdBQUcsTUFBTSxLQUFLLENBQUM7QUF5RHJCLENBQUM7QUFzQkYsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO0lBQ3BDLEtBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFO0lBQ25CLElBQUksRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztJQUN6QyxPQUFPLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtJQUNyQixVQUFVLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtJQUN4QixhQUFhLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtJQUMzQixPQUFPLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUFFLGNBQWM7SUFDckMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUU7SUFDZixNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtJQUNwQixVQUFVLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtDQUMzQixDQUFDLENBQUM7QUFFSCxNQUFNLFVBQVUsdUJBQXVCLENBQUMsR0FBUTtJQUk1QyxPQUFPLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBTUEsQ0FBQztBQVNGLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO0lBQy9CLEtBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFO0lBQ25CLFVBQVUsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFO0lBQ3hCLElBQUksRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztJQUN6QyxPQUFPLEVBQUUs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QUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0NBRTNELENBQUMsQ0FBQztBQUVILE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxHQUFRO0lBSXJDLE9BQU8sV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBMkRuQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tIFwiam9pXCI7XG5cbi8qKlxuICogRXZlcnkgY2FjaGUgZW50cnkgaGFzIHRoZXNlIGZpZWxkcy4gIEZvclxuICogbW9zdCBjYWNoZSB0eXBlcywgdGhlcmUgd2lsbCBiZSBhZGRpdGlvbmFsXG4gKiBmaWVsZHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUNhY2hlRW50cnkge1xuXG4gICAgLyoqXG4gICAgICogVmlydHVhbCBwYXRoXG4gICAgICovXG4gICAgdnBhdGg6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1JTUUgdHlwZVxuICAgICAqL1xuICAgIG1pbWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZmlsZS1zeXN0ZW0gcGF0aCB3aGljaCBpcyBtb3VudGVkXG4gICAgICogaW50byB0aGUgdmlydHVhbCBmaWxlIHNwYWNlLlxuICAgICAqL1xuICAgIG1vdW50ZWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSB2aXJ0dWFsIGRpcmVjdG9yeSBvZiB0aGUgbW91bnRcbiAgICAgKiBlbnRyeSBpbiB0aGUgZGlyZWN0b3J5IHN0YWNrLlxuICAgICAqL1xuICAgIG1vdW50UG9pbnQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSByZWxhdGl2ZSBwYXRoIHVuZGVybmVhdGggdGhlIG1vdW50UG9pbnQuXG4gICAgICovXG4gICAgcGF0aEluTW91bnRlZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQWJzb2x1dGUgcGF0aCBuYW1lIGluIHRoZSBwaHlzaWNhbFxuICAgICAqIGZpbGVzeXN0ZW0uXG4gICAgICovXG4gICAgZnNwYXRoOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBkaXJuYW1lIGZvciBmc3BhdGhcbiAgICAgKi9cbiAgICBkaXJuYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW9kaWZpY2F0aW9uIHRpbWUsIGluIG1pbGlzZWNvbmRzLlxuICAgICAqL1xuICAgIG10aW1lTXM6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEluZm8gb2JqZWN0IHByb3ZpZGVkIGJ5IFN0YWNrZWREaXJzIGFuZFxuICAgICAqIGFubm90YXRlZCB3aXRoIGdhdGhlckluZm9EYXRhXG4gICAgICovXG4gICAgaW5mbzogYW55O1xufTtcblxuLyoqXG4gKiBUeXBlIGZvciByZXR1cm4gZnJvbSBwYXRocyBtZXRob2QuICBUaGUgZmllbGRzIGhlcmVcbiAqIGFyZSB3aGF0cyBpbiB0aGUgQXNzZXQvTGF5b3V0L1BhcnRpYWwgY2xhc3NlcyBhYm92ZVxuICogcGx1cyBhIGNvdXBsZSBmaWVsZHMgdGhhdCBvbGRlciBjb2RlIGV4cGVjdGVkXG4gKiBmcm9tIHRoZSBwYXRocyBtZXRob2QuXG4gKi9cbmV4cG9ydCB0eXBlIFBhdGhzUmV0dXJuVHlwZSA9IHtcbiAgICB2cGF0aDogc3RyaW5nLFxuICAgIG1pbWU/OiBzdHJpbmcsXG4gICAgbW91bnRlZDogc3RyaW5nLFxuICAgIG1vdW50UG9pbnQ6IHN0cmluZyxcbiAgICBwYXRoSW5Nb3VudGVkOiBzdHJpbmcsXG4gICAgbXRpbWVNczogbnVtYmVyLFxuICAgIGluZm86IGFueSxcbiAgICAvLyBUaGVzZSB3aWxsIGJlIGNvbXB1dGVkIGluIEJhc2VGaWxlQ2FjaGVcbiAgICAvLyBUaGV5IHdlcmUgcmV0dXJuZWQgaW4gcHJldmlvdXMgdmVyc2lvbnMuXG4gICAgZnNwYXRoOiBzdHJpbmcsXG4gICAgcmVuZGVyUGF0aDogc3RyaW5nXG59O1xuXG5jb25zdCBqb2lJc1BhdGhzUmV0dXJuVHlwZSA9IEpvaS5vYmplY3Qoe1xuICAgIHZwYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgbWltZTogSm9pLnN0cmluZygpLm9wdGlvbmFsKCkuYWxsb3cobnVsbCksXG4gICAgbW91bnRlZDogSm9pLnN0cmluZygpLFxuICAgIG1vdW50UG9pbnQ6IEpvaS5zdHJpbmcoKSxcbiAgICBwYXRoSW5Nb3VudGVkOiBKb2kuc3RyaW5nKCksXG4gICAgbXRpbWVNczogSm9pLm51bWJlcigpLCAvLyAuaW50ZWdlcigpLFxuICAgIGluZm86IEpvaS5hbnkoKSxcbiAgICBmc3BhdGg6IEpvaS5zdHJpbmcoKSxcbiAgICByZW5kZXJQYXRoOiBKb2kuc3RyaW5nKClcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQYXRoc1JldHVyblR5cGUob2JqOiBhbnkpOiB7XG4gICAgZXJyb3I6IGFueSxcbiAgICB2YWx1ZTogUGF0aHNSZXR1cm5UeXBlXG59IHtcbiAgICByZXR1cm4gam9pSXNQYXRoc1JldHVyblR5cGUudmFsaWRhdGUob2JqKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8gQXNzZXRcblxuZXhwb3J0IGludGVyZmFjZSBBc3NldEZpZWxkcyB7XG5cbn07XG5cbi8qKlxuICogRGVzY3JpYmVzIGFuIGVudHJ5IGluIGFuIEFzc2V0IGRpcmVjdG9yeSwgbWVhbmluZ1xuICogdGhlIGZpbGVzIHdoaWNoIGFyZSBzaW1wbHkgY29waWVkIHRvIHRoZSBvdXRwdXRcbiAqIGRpcmVjdG9yeSB3aXRoIG5vIHJlbmRlcmluZyBwcm9jZXNzLlxuICovXG5leHBvcnQgdHlwZSBBc3NldCA9IEJhc2VDYWNoZUVudHJ5ICYgQXNzZXRGaWVsZHM7XG5cbmV4cG9ydCBjb25zdCBqb2lBc3NldCA9IEpvaS5vYmplY3Qoe1xuICAgIHZwYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgcmVuZGVyUGF0aDogSm9pLnN0cmluZygpLFxuICAgIG1pbWU6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLmFsbG93KG51bGwpLFxuICAgIG1vdW50ZWQ6IEpvaS5zdHJpbmcoKSxcbiAgICBtb3VudFBvaW50OiBKb2kuc3RyaW5nKCksXG4gICAgcGF0aEluTW91bnRlZDogSm9pLnN0cmluZygpLFxuICAgIGZzcGF0aDogSm9pLnN0cmluZygpLFxuICAgIGRpcm5hbWU6IEpvaS5zdHJpbmcoKSxcbiAgICBtdGltZU1zOiBKb2kubnVtYmVyKCksIC8vIC5pbnRlZ2VyKCksXG4gICAgaW5mbzogSm9pLmFueSgpXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXNzZXQob2JqOiBhbnkpOiB7XG4gICAgZXJyb3I6IGFueSxcbiAgICB2YWx1ZTogQXNzZXRcbn0ge1xuICAgIHJldHVybiBqb2lBc3NldC52YWxpZGF0ZShvYmopO1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQXNzZXRzVGFibGUgPSBgXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBcIkFTU0VUU1wiIChcbiAgXFxgdnBhdGhcXGAgVEVYVCBQUklNQVJZIEtFWSxcbiAgXFxgcmVuZGVyUGF0aFxcYCBURVhUICBHRU5FUkFURUQgQUxXQVlTXG4gICAgICAgIEFTICh2cGF0aCkgU1RPUkVELFxuICBcXGBtaW1lXFxgIFRFWFQsXG4gIFxcYG1vdW50ZWRcXGAgVEVYVCxcbiAgXFxgbW91bnRQb2ludFxcYCBURVhULFxuICBcXGBwYXRoSW5Nb3VudGVkXFxgIFRFWFQsXG4gIFxcYGZzcGF0aFxcYCBURVhULFxuICBcXGBkaXJuYW1lXFxgIFRFWFQsXG4gIFxcYG10aW1lTXNcXGAgUkVBTCxcbiAgXFxgaW5mb1xcYCBURVhUXG4pIFdJVEhPVVQgUk9XSUQ7XG5DUkVBVEUgSU5ERVggXCJhc3NldF92cGF0aFwiXG4gICAgICAgIE9OIFwiQVNTRVRTXCIgKFwidnBhdGhcIik7XG5DUkVBVEUgSU5ERVggXCJhc3NldF9tb3VudGVkXCJcbiAgICAgICAgT04gXCJBU1NFVFNcIiAoXCJtb3VudGVkXCIpO1xuQ1JFQVRFIElOREVYIFwiYXNzZXRfbW91bnRQb2ludFwiXG4gICAgICAgIE9OIFwiQVNTRVRTXCIgKFwibW91bnRQb2ludFwiKTtcbkNSRUFURSBJTkRFWCBcImFzc2V0X3BhdGhJbk1vdW50ZWRcIlxuICAgICAgICBPTiBcIkFTU0VUU1wiIChcInBhdGhJbk1vdW50ZWRcIik7XG5DUkVBVEUgSU5ERVggXCJhc3NldF9mc3BhdGhcIlxuICAgICAgICBPTiBcIkFTU0VUU1wiIChcImZzcGF0aFwiKTtcbkNSRUFURSBJTkRFWCBcImFzc2V0X2Rpcm5hbWVcIlxuICAgICAgICBPTiBcIkFTU0VUU1wiIChcImRpcm5hbWVcIik7XG5DUkVBVEUgSU5ERVggXCJhc3NldF9tdGltZU1zXCJcbiAgICAgICAgT04gXCJBU1NFVFNcIiAoXCJtdGltZU1zXCIpO1xuYDtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8gUGFydGlhbFxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpYWxGaWVsZHMge1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgZm9yIHRoZSB0ZW1wbGF0ZS5cbiAgICAgKi9cbiAgICBkb2NCb2R5OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgUmVuZGVyZXIgY2xhc3MuXG4gICAgICogXG4gICAgICogPz8/IFRPRE8gSVMgVEhJUyBORUVERURcbiAgICAgKi9cbiAgICByZW5kZXJlck5hbWU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFBhcnRpYWwgPSBCYXNlQ2FjaGVFbnRyeSAmIFBhcnRpYWxGaWVsZHM7XG5cbmV4cG9ydCBjb25zdCBqb2lQYXJ0aWFsID0gSm9pLm9iamVjdCh7XG4gICAgdnBhdGg6IEpvaS5zdHJpbmcoKSxcbiAgICByZW5kZXJQYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgbWltZTogSm9pLnN0cmluZygpLm9wdGlvbmFsKCkuYWxsb3cobnVsbCksXG4gICAgbW91bnRlZDogSm9pLnN0cmluZygpLFxuICAgIG1vdW50UG9pbnQ6IEpvaS5zdHJpbmcoKSxcbiAgICBwYXRoSW5Nb3VudGVkOiBKb2kuc3RyaW5nKCksXG4gICAgZnNwYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgZGlybmFtZTogSm9pLnN0cmluZygpLFxuICAgIG10aW1lTXM6IEpvaS5udW1iZXIoKSwgLy8gLmludGVnZXIoKSxcbiAgICBpbmZvOiBKb2kuYW55KCksXG5cbiAgICAvLyBBZGRlZCBmaWVsZHNcbiAgICBkb2NCb2R5OiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKS5hbGxvdyhudWxsKSxcbiAgICByZW5kZXJlck5hbWU6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLmFsbG93KG51bGwpXG5cbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQYXJ0aWFsKG9iajogYW55KToge1xuICAgIGVycm9yOiBhbnksXG4gICAgdmFsdWU6IFBhcnRpYWxcbn0ge1xuICAgIHJldHVybiBqb2lQYXJ0aWFsLnZhbGlkYXRlKG9iaik7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQYXJ0aWFsc1RhYmxlID0gYFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgXCJQQVJUSUFMU1wiIChcbiAgXFxgdnBhdGhcXGAgVEVYVCBQUklNQVJZIEtFWSxcbiAgXFxgcmVuZGVyUGF0aFxcYCBURVhUICBHRU5FUkFURUQgQUxXQVlTXG4gICAgICAgIEFTICh2cGF0aCkgU1RPUkVELFxuICBcXGBtaW1lXFxgIFRFWFQsXG4gIFxcYG1vdW50ZWRcXGAgVEVYVCxcbiAgXFxgbW91bnRQb2ludFxcYCBURVhULFxuICBcXGBwYXRoSW5Nb3VudGVkXFxgIFRFWFQsXG4gIFxcYGZzcGF0aFxcYCBURVhULFxuICBcXGBkaXJuYW1lXFxgIFRFWFQsXG4gIFxcYG10aW1lTXNcXGAgUkVBTCxcbiAgXFxgZG9jQm9keVxcYCBURVhULFxuICBcXGByZW5kZXJlck5hbWVcXGAgVEVYVCxcbiAgXFxgaW5mb1xcYCBURVhUXG4pIFdJVEhPVVQgUk9XSUQ7XG5DUkVBVEUgSU5ERVggXCJwYXJ0aWFsX3ZwYXRoXCJcbiAgICAgICAgT04gXCJQQVJUSUFMU1wiIChcInZwYXRoXCIpO1xuQ1JFQVRFIElOREVYIFwicGFydGlhbF9tb3VudGVkXCJcbiAgICAgICAgT04gXCJQQVJUSUFMU1wiIChcIm1vdW50ZWRcIik7XG5DUkVBVEUgSU5ERVggXCJwYXJ0aWFsX21vdW50UG9pbnRcIlxuICAgICAgICBPTiBcIlBBUlRJQUxTXCIgKFwibW91bnRQb2ludFwiKTtcbkNSRUFURSBJTkRFWCBcInBhcnRpYWxfcGF0aEluTW91bnRlZFwiXG4gICAgICAgIE9OIFwiUEFSVElBTFNcIiAoXCJwYXRoSW5Nb3VudGVkXCIpO1xuQ1JFQVRFIElOREVYIFwicGFydGlhbF9mc3BhdGhcIlxuICAgICAgICBPTiBcIlBBUlRJQUxTXCIgKFwiZnNwYXRoXCIpO1xuQ1JFQVRFIElOREVYIFwicGFydGlhbF9kaXJuYW1lXCJcbiAgICAgICAgT04gXCJQQVJUSUFMU1wiIChcImRpcm5hbWVcIik7XG5DUkVBVEUgSU5ERVggXCJwYXJ0aWFsX210aW1lTXNcIlxuICAgICAgICBPTiBcIlBBUlRJQUxTXCIgKFwibXRpbWVNc1wiKTtcbmA7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vIExheW91dFxuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dEZpZWxkcyB7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGVtcGxhdGUgcHJvZHVjZXNcbiAgICAgKiBIVE1MLlxuICAgICAqIFxuICAgICAqID8/PyBJUyBUSElTIE5FRURFRD9cbiAgICAgKi9cbiAgICByZW5kZXJzVG9IVE1MOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgZm9yIHRoZSB0ZW1wbGF0ZS5cbiAgICAgKi9cbiAgICBkb2NCb2R5OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgUmVuZGVyZXIgY2xhc3MuXG4gICAgICogXG4gICAgICogPz8/IFRPRE8gSVMgVEhJUyBORUVERURcbiAgICAgKi9cbiAgICByZW5kZXJlck5hbWU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIExheW91dCA9IEJhc2VDYWNoZUVudHJ5ICYgTGF5b3V0RmllbGRzO1xuXG5leHBvcnQgY29uc3Qgam9pTGF5b3V0ID0gSm9pLm9iamVjdCh7XG5cbiAgICB2cGF0aDogSm9pLnN0cmluZygpLFxuICAgIHJlbmRlclBhdGg6IEpvaS5zdHJpbmcoKSxcbiAgICBtaW1lOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKS5hbGxvdyhudWxsKSxcbiAgICBtb3VudGVkOiBKb2kuc3RyaW5nKCksXG4gICAgbW91bnRQb2ludDogSm9pLnN0cmluZygpLFxuICAgIHBhdGhJbk1vdW50ZWQ6IEpvaS5zdHJpbmcoKSxcbiAgICBmc3BhdGg6IEpvaS5zdHJpbmcoKSxcbiAgICBkaXJuYW1lOiBKb2kuc3RyaW5nKCksXG4gICAgbXRpbWVNczogSm9pLm51bWJlcigpLCAvLyAuaW50ZWdlcigpLFxuICAgIGluZm86IEpvaS5hbnkoKSxcblxuICAgIC8vIEFkZGVkIGZpZWxkc1xuICAgIHJlbmRlcnNUb0hUTUw6IEpvaS5hbHRlcm5hdGl2ZXMoKVxuICAgICAgICAudHJ5KFxuICAgICAgICAgICAgSm9pLmJvb2xlYW4oKSxcbiAgICAgICAgICAgIEpvaS5udW1iZXIoKS5pbnRlZ2VyKCkubWluKDApLm1heCgxKVxuICAgICAgICApLFxuICAgIGRvY0JvZHk6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLmFsbG93KG51bGwpLFxuICAgIHJlbmRlcmVyTmFtZTogSm9pLnN0cmluZygpLm1pbigwKS5vcHRpb25hbCgpLmFsbG93KG51bGwpXG5cbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVMYXlvdXQob2JqOiBhbnkpOiB7XG4gICAgZXJyb3I6IGFueSxcbiAgICB2YWx1ZTogTGF5b3V0XG59IHtcbiAgICByZXR1cm4gam9pTGF5b3V0LnZhbGlkYXRlKG9iaik7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVMYXlvdXRzVGFibGUgPSBgXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBcIkxBWU9VVFNcIiAoXG4gIFxcYHZwYXRoXFxgIFRFWFQgUFJJTUFSWSBLRVksXG4gIFxcYHJlbmRlclBhdGhcXGAgVEVYVCAgR0VORVJBVEVEIEFMV0FZU1xuICAgICAgICBBUyAodnBhdGgpIFNUT1JFRCxcbiAgXFxgbWltZVxcYCBURVhULFxuICBcXGBtb3VudGVkXFxgIFRFWFQsXG4gIFxcYG1vdW50UG9pbnRcXGAgVEVYVCxcbiAgXFxgcGF0aEluTW91bnRlZFxcYCBURVhULFxuICBcXGBmc3BhdGhcXGAgVEVYVCxcbiAgXFxgZGlybmFtZVxcYCBURVhULFxuICBcXGBtdGltZU1zXFxgIFJFQUwsXG4gIFxcYHJlbmRlcnNUb0hUTUxcXGAgSU5URUdFUixcbiAgXFxgZG9jQm9keVxcYCBURVhULFxuICBcXGByZW5kZXJlck5hbWVcXGAgVEVYVCxcbiAgXFxgaW5mb1xcYCBURVhUXG4pIFdJVEhPVVQgUk9XSUQ7XG5DUkVBVEUgSU5ERVggXCJsYXlvdXRfdnBhdGhcIlxuICAgICAgICBPTiBcIkxBWU9VVFNcIiAoXCJ2cGF0aFwiKTtcbkNSRUFURSBJTkRFWCBcImxheW91dF9tb3VudGVkXCJcbiAgICAgICAgT04gXCJMQVlPVVRTXCIgKFwibW91bnRlZFwiKTtcbkNSRUFURSBJTkRFWCBcImxheW91dF9tb3VudFBvaW50XCJcbiAgICAgICAgT04gXCJMQVlPVVRTXCIgKFwibW91bnRQb2ludFwiKTtcbkNSRUFURSBJTkRFWCBcImxheW91dF9wYXRoSW5Nb3VudGVkXCJcbiAgICAgICAgT04gXCJMQVlPVVRTXCIgKFwicGF0aEluTW91bnRlZFwiKTtcbkNSRUFURSBJTkRFWCBcImxheW91dF9mc3BhdGhcIlxuICAgICAgICBPTiBcIkxBWU9VVFNcIiAoXCJmc3BhdGhcIik7XG5DUkVBVEUgSU5ERVggXCJsYXlvdXRfZGlybmFtZVwiXG4gICAgICAgIE9OIFwiTEFZT1VUU1wiIChcImRpcm5hbWVcIik7XG5DUkVBVEUgSU5ERVggXCJsYXlvdXRfbXRpbWVNc1wiXG4gICAgICAgIE9OIFwiTEFZT1VUU1wiIChcIm10aW1lTXNcIik7XG5gO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLyBEb2N1bWVudFxuXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50RmllbGRzIHtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2aXJ0dWFsIHBhdGhuYW1lIHRvIHdoaWNoIHRoaXNcbiAgICAgKiBkb2N1bWVudCByZW5kZXJzIGluIHRoZSBvdXRwdXQgZGlyZWN0b3J5LlxuICAgICAqL1xuICAgIHJlbmRlclBhdGg6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0ZW1wbGF0ZSBwcm9kdWNlc1xuICAgICAqIEhUTUwuXG4gICAgICogXG4gICAgICogPz8/IElTIFRISVMgTkVFREVEP1xuICAgICAqL1xuICAgIHJlbmRlcnNUb0hUTUw6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmlydHVhbCBwYXRobmFtZSB0aGF0IGlzIHRoZVxuICAgICAqIGRpcmVjdG9yeSBuYW1lIG9mIHRoZSByZW5kZXJQYXRoLlxuICAgICAqL1xuICAgIC8vIElOIEJBU0UgQ0FDSEUgZGlybmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZpcnR1YWwgcGF0aG5hbWUgdGhhdCBpcyB0aGVcbiAgICAgKiBwYXJlbnQgZGlyZWN0b3J5IG5hbWUgb2YgZGlybmFtZS5cbiAgICAgKiBcbiAgICAgKiA/Pz8/PyBJUyBUSElTIE5FRURFRFxuICAgICAqL1xuICAgIHBhcmVudERpcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFwidGltZVwiIChzZWNvbmRzIHNpbmNlIEphbiAxIDE5NzApXG4gICAgICogY29ycmVzcG9uZGluZyB0byB0aGUgcHVibGljYXRpb25EYXRlXG4gICAgICogZmllbGQgaW4gdGhlIGRvY3VtZW50IG1ldGFkYXRhLlxuICAgICAqIFxuICAgICAqIElOVEVHRVIgR0VORVJBVEVEIEFMV0FZU1xuICAgICAqICBBUyAoanNvbl9leHRyYWN0KGluZm8sICckLnB1YmxpY2F0aW9uVGltZScpKSBTVE9SRURcbiAgICAgKi9cbiAgICBwdWJsaWNhdGlvblRpbWU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBmb3IgdGhlIGJhc2VNZXRhZGF0YSBvZlxuICAgICAqIHRoZSBtb3VudGVkIHZpcnR1YWwgZGlyZWN0b3J5IGluXG4gICAgICogd2hpY2ggdGhpcyBmaWxlIGlzIHN0b3JlZC4gIFRoaXNcbiAgICAgKiBtZXRhZGF0YSBpcyB1c2VkIGluIGNvbXB1dGluZyB0aGVcbiAgICAgKiBmaW5hbCBtZXRhZGF0YS5cbiAgICAgKiBcbiAgICAgKiBURVhUIEdFTkVSQVRFRCBBTFdBWVNcbiAgICAgKiAgQVMgKGpzb25fZXh0cmFjdChpbmZvLCAnJC5iYXNlTWV0YWRhdGEnKSkgU1RPUkVEXG4gICAgICovXG4gICAgYmFzZU1ldGFkYXRhOiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgZm9yIHRoZSBoZWFkZXIgbWV0YWRhdGEgb2ZcbiAgICAgKiB0aGUgZG9jdW1lbnQuICBUaGlzIG1ldGFkYXRhIGlzIHVzZWQsXG4gICAgICogYWxvbmcgd2l0aCBkb2NNZXRhZGF0YSwgaW4gY29tcHV0aW5nIHRoZVxuICAgICAqIGZpbmFsIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIGRvY01ldGFkYXRhOiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBmb3IgdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRvY0NvbnRlbnQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBib2R5IHBvcnRpb24gb2YgdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRvY0JvZHk6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBtZXRhZGF0YSBmb3IgdGhlIGRvY3VtZW50LFxuICAgICAqIHdoaWNoIGlzIGNvbXB1dGVkIGZyb20gYmFzZU1ldGFkYXRhXG4gICAgICogYW5kIGRvY01ldGFkYXRhLlxuICAgICAqIFxuICAgICAqIFRFWFQgR0VORVJBVEVEIEFMV0FZU1xuICAgICAqICBBUyAoanNvbl9leHRyYWN0KGluZm8sICckLm1ldGFkYXRhJykpIFNUT1JFRFxuICAgICAqL1xuICAgIG1ldGFkYXRhOiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYXJyYXkgb2YgdGFnIHN0cmluZ3MgZGVyaXZlZCBmcm9tXG4gICAgICogdGhlIHRhZ3MgZmllbGQgb2YgdGhlIGRvY3VtZW50IG1ldGFkYXRhLlxuICAgICAqIFxuICAgICAqIFRFWFQgR0VORVJBVEVEIEFMV0FZU1xuICAgICAqICBBUyAoanNvbl9leHRyYWN0KGluZm8sICckLm1ldGFkYXRhLnRhZ3MnKSkgU1RPUkVEXG4gICAgICovXG4gICAgdGFnczogYW55O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIGxheW91dCBmaWVsZFxuICAgICAqIG9mIHRoZSBkb2N1bWVudCBtZXRhZGF0YS5cbiAgICAgKiBcbiAgICAgKiBURVhUIEdFTkVSQVRFRCBBTFdBWVNcbiAgICAgKiAgQVMgKGpzb25fZXh0cmFjdChtZXRhZGF0YSwgJyQubGF5b3V0JykpIFNUT1JFRFxuICAgICAqL1xuICAgIGxheW91dDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIGJsb2d0YWcgZmllbGRcbiAgICAgKiBvZiB0aGUgZG9jdW1lbnQgbWV0YWRhdGEuXG4gICAgICogXG4gICAgICogVEVYVCBHRU5FUkFURUQgQUxXQVlTXG4gICAgICogIEFTIChqc29uX2V4dHJhY3QobWV0YWRhdGEsICckLmJsb2d0YWcnKSkgU1RPUkVEXG4gICAgICovXG4gICAgYmxvZ3RhZzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIFJlbmRlcmVyIGNsYXNzLlxuICAgICAqIFxuICAgICAqID8/PyBUT0RPIElTIFRISVMgTkVFREVEXG4gICAgICovXG4gICAgcmVuZGVyZXJOYW1lOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudCA9IEJhc2VDYWNoZUVudHJ5XG4gICAgICAgICAgICAgICAgICAgICAmIERvY3VtZW50RmllbGRzO1xuXG5leHBvcnQgY29uc3Qgam9pRG9jdW1lbnQgPSBKb2kub2JqZWN0KHtcblxuICAgIHZwYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgbWltZTogSm9pLnN0cmluZygpLm9wdGlvbmFsKCkuYWxsb3cobnVsbCksXG4gICAgbW91bnRlZDogSm9pLnN0cmluZygpLFxuICAgIG1vdW50UG9pbnQ6IEpvaS5zdHJpbmcoKSxcbiAgICBwYXRoSW5Nb3VudGVkOiBKb2kuc3RyaW5nKCksXG4gICAgZnNwYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgZGlybmFtZTogSm9pLnN0cmluZygpLFxuICAgIG10aW1lTXM6IEpvaS5udW1iZXIoKSwgLy8gLmludGVnZXIoKSxcbiAgICBpbmZvOiBKb2kuYW55KCksXG5cbiAgICAvLyBBZGRlZCBmaWVsZHNcbiAgICByZW5kZXJQYXRoOiBKb2kuc3RyaW5nKCksXG4gICAgcmVuZGVyc1RvSFRNTDogSm9pLmFsdGVybmF0aXZlcygpXG4gICAgICAgIC50cnkoXG4gICAgICAgICAgICBKb2kuYm9vbGVhbigpLFxuICAgICAgICAgICAgSm9pLm51bWJlcigpLmludGVnZXIoKS5taW4oMCkubWF4KDEpXG4gICAgICAgICksXG4gICAgcGFyZW50RGlyOiBKb2kuc3RyaW5nKCksXG4gICAgcHVibGljYXRpb25UaW1lOiBKb2kubnVtYmVyKCkub3B0aW9uYWwoKS5hbGxvdyhudWxsKSxcbiAgICBiYXNlTWV0YWRhdGE6IEpvaS5hbnkoKSxcbiAgICBkb2NNZXRhZGF0YTogSm9pLmFueSgpLFxuICAgIGRvY0NvbnRlbnQ6IEpvaS5zdHJpbmcoKS5taW4oMCkub3B0aW9uYWwoKS5hbGxvdyhudWxsKSxcbiAgICBkb2NCb2R5OiBKb2kuc3RyaW5nKCkubWluKDApLm9wdGlvbmFsKCkuYWxsb3cobnVsbCksXG4gICAgbWV0YWRhdGE6IEpvaS5hbnkoKSxcbiAgICB0YWdzOiBKb2kuYW55KCksXG4gICAgbGF5b3V0OiBKb2kuYWx0ZXJuYXRpdmVzKClcbiAgICAgICAgLnRyeShcbiAgICAgICAgICAgIEpvaS5zdHJpbmcoKSxcbiAgICAgICAgICAgIEpvaS5hbGxvdyhudWxsKVxuICAgICAgICApLFxuICAgIGJsb2d0YWc6IEpvaS5hbHRlcm5hdGl2ZXMoKVxuICAgICAgICAudHJ5KFxuICAgICAgICAgICAgSm9pLnN0cmluZygpLFxuICAgICAgICAgICAgSm9pLmFsbG93KG51bGwpXG4gICAgICAgICksXG4gICAgcmVuZGVyZXJOYW1lOiBKb2kuc3RyaW5nKCkubWluKDApLm9wdGlvbmFsKCkuYWxsb3cobnVsbClcblxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURvY3VtZW50KG9iajogYW55KToge1xuICAgIGVycm9yOiBhbnksXG4gICAgdmFsdWU6IERvY3VtZW50XG59IHtcbiAgICByZXR1cm4gam9pRG9jdW1lbnQudmFsaWRhdGUob2JqKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZURvY3VtZW50c1RhYmxlID0gYFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgXCJET0NVTUVOVFNcIiAoXG4gIFxcYHZwYXRoXFxgIFRFWFQgUFJJTUFSWSBLRVksXG4gIFxcYG1pbWVcXGAgVEVYVCxcbiAgXFxgbW91bnRlZFxcYCBURVhULFxuICBcXGBtb3VudFBvaW50XFxgIFRFWFQsXG4gIFxcYHBhdGhJbk1vdW50ZWRcXGAgVEVYVCxcbiAgXFxgZnNwYXRoXFxgIFRFWFQsXG4gIFxcYGRpcm5hbWVcXGAgVEVYVCxcbiAgXFxgbXRpbWVNc1xcYCBSRUFMLFxuICBcXGByZW5kZXJQYXRoXFxgIFRFWFQsXG4gIFxcYHJlbmRlcnNUb0hUTUxcXGAgSU5URUdFUixcbiAgXFxgcGFyZW50RGlyXFxgIFRFWFQsXG4gIFxcYHB1YmxpY2F0aW9uVGltZVxcYCBJTlRFR0VSIEdFTkVSQVRFRCBBTFdBWVNcbiAgICAgICAgQVMgKGpzb25fZXh0cmFjdChpbmZvLCAnJC5wdWJsaWNhdGlvblRpbWUnKSkgU1RPUkVELFxuICBcXGBiYXNlTWV0YWRhdGFcXGAgVEVYVCBHRU5FUkFURUQgQUxXQVlTXG4gICAgICAgIEFTIChqc29uX2V4dHJhY3QoaW5mbywgJyQuYmFzZU1ldGFkYXRhJykpIFNUT1JFRCxcbiAgXFxgZG9jTWV0YWRhdGFcXGAgVEVYVCxcbiAgXFxgZG9jQ29udGVudFxcYCBURVhULFxuICBcXGBkb2NCb2R5XFxgIFRFWFQsXG4gIFxcYG1ldGFkYXRhXFxgIFRFWFQgR0VORVJBVEVEIEFMV0FZU1xuICAgICAgICBBUyAoanNvbl9leHRyYWN0KGluZm8sICckLm1ldGFkYXRhJykpIFNUT1JFRCxcbiAgXFxgdGFnc1xcYCBURVhUIEdFTkVSQVRFRCBBTFdBWVNcbiAgICAgICAgQVMgKGpzb25fZXh0cmFjdChpbmZvLCAnJC5tZXRhZGF0YS50YWdzJykpIFNUT1JFRCxcbiAgXFxgbGF5b3V0XFxgIFRFWFQgR0VORVJBVEVEIEFMV0FZU1xuICAgICAgICBBUyAoanNvbl9leHRyYWN0KG1ldGFkYXRhLCAnJC5sYXlvdXQnKSkgU1RPUkVELFxuICBcXGBibG9ndGFnXFxgIFRFWFQgR0VORVJBVEVEIEFMV0FZU1xuICAgICAgICBBUyAoanNvbl9leHRyYWN0KG1ldGFkYXRhLCAnJC5ibG9ndGFnJykpIFNUT1JFRCxcbiAgXFxgcmVuZGVyZXJOYW1lXFxgIFRFWFQsXG4gIFxcYGluZm9cXGAgVEVYVFxuKSBXSVRIT1VUIFJPV0lEO1xuQ1JFQVRFIElOREVYIFwiZG9jdW1lbnRfdnBhdGhcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcInZwYXRoXCIpO1xuQ1JFQVRFIElOREVYIFwiZG9jdW1lbnRfbW91bnRlZFwiXG4gICAgICAgIE9OIFwiRE9DVU1FTlRTXCIgKFwibW91bnRlZFwiKTtcbkNSRUFURSBJTkRFWCBcImRvY3VtZW50X21vdW50UG9pbnRcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcIm1vdW50UG9pbnRcIik7XG5DUkVBVEUgSU5ERVggXCJkb2N1bWVudF9wYXRoSW5Nb3VudGVkXCJcbiAgICAgICAgT04gXCJET0NVTUVOVFNcIiAoXCJwYXRoSW5Nb3VudGVkXCIpO1xuQ1JFQVRFIElOREVYIFwiZG9jdW1lbnRfZnNwYXRoXCJcbiAgICAgICAgT04gXCJET0NVTUVOVFNcIiAoXCJmc3BhdGhcIik7XG5DUkVBVEUgSU5ERVggXCJkb2N1bWVudF9kaXJuYW1lXCJcbiAgICAgICAgT04gXCJET0NVTUVOVFNcIiAoXCJkaXJuYW1lXCIpO1xuQ1JFQVRFIElOREVYIFwiZG9jdW1lbnRfcmVuZGVyUGF0aFwiXG4gICAgICAgIE9OIFwiRE9DVU1FTlRTXCIgKFwicmVuZGVyUGF0aFwiKTtcbkNSRUFURSBJTkRFWCBcImRvY3VtZW50X3JlbmRlcnNUb0hUTUxcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcInJlbmRlcnNUb0hUTUxcIik7XG5DUkVBVEUgSU5ERVggXCJkb2N1bWVudF9wYXJlbnREaXJcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcInBhcmVudERpclwiKTtcbkNSRUFURSBJTkRFWCBcImRvY3VtZW50X210aW1lTXNcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcIm10aW1lTXNcIik7XG5DUkVBVEUgSU5ERVggXCJkb2N1bWVudF9wdWJsaWNhdGlvblRpbWVcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcInB1YmxpY2F0aW9uVGltZVwiKTtcbkNSRUFURSBJTkRFWCBcImRvY3VtZW50X3RhZ3NcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcInRhZ3NcIik7XG5DUkVBVEUgSU5ERVggXCJkb2N1bWVudF9sYXlvdXRcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcImxheW91dFwiKTtcbkNSRUFURSBJTkRFWCBcImRvY3VtZW50X2Jsb2d0YWdcIlxuICAgICAgICBPTiBcIkRPQ1VNRU5UU1wiIChcImJsb2d0YWdcIik7XG5gO1xuIl19